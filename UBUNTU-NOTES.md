# Ubuntu

The [Cartesi](http://cartesi.io) team is interested in having python images built for `linux/riscv46` architecture, so it can be used as a base image for Cartesi DApps written in python.

Debian and buildpack-deps debian images, which are the base for the python image, are still unstable for `linux/riscv64` platform.

On the other hand Ubuntu and buildpack-deps ubuntu images already have official builds for `linux/riscv64`.

So this branch adds Ubuntu based variants for the `python` image.
A [PR was opened upstream](https://github.com/docker-library/python/pull/791), but its unlikely to be accepted.

In the meantime the Cartesi team is building the image and publishing as `cartesi/python`.

```shell
docker pull cartesi/python
```

## Building locally

The primary change introduced in this branch was to `versions.sh`, adding `jammy`, `kinetic`, `jammy-slim` and `kinetic-slim` variants. The other changes are generated by executing the following command, which uses Docker so it works on any platform.

```shell
docker run -it --rm -v $(pwd):/app ubuntu
apt-get update
apt-get install -y curl gawk git jq wget
/app/update.sh
```

After running the command above several Dockerfiles are created or updated. The commands below build the images locally, using `dockerx` multi platform build.

```shell
docker buildx bake
```

> TODO: create a script to generate the [docker-bake.hcl](docker-bake.hcl) file from the [versions.json](versions.json) files.

Several tags are built, the main one is `docker.io/cartesi/python:jammy`.
